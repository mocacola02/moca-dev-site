import{r as c,j as a,R,k as j}from"./chunk-B9I0R0_Z.js";const L=c.forwardRef((e,t)=>a.jsx("div",{...e,ref:t,style:{display:e.children?"contents":"block"}}));L.displayName="Slot";const E=c.forwardRef((e,t)=>a.jsx("div",{...e,ref:t,style:{display:"contents"}}));E.displayName="Fragment";function g(...e){return e.length===1&&e[0]?e[0]:t=>{for(let n of e)typeof n=="function"?n(t):n!=null&&(n.current=t)}}const b=()=>document.readyState==="complete"||document.readyState==="interactive",l=[];let m=!1;const S=()=>{if(b()===!1){console.error("DOMContentLoaded event has not been fired yet");return}if(m)return;m=!0;const e=document.addEventListener,t=window.addEventListener,n=new Event("DOMContentLoaded"),r=new Event("load");window.addEventListener=(s,d,o)=>{s==="DOMContentLoaded"?l.push(()=>d.call(window,n)):(s==="load"&&l.push(()=>d.call(window,r)),t.call(window,s,d,o))},document.addEventListener=(s,d,o)=>{s==="DOMContentLoaded"?l.push(()=>d.call(document,n)):e.call(document,s,d,o)}},O=()=>{for(const e of l)e();l.length=0},C={scriptTestIdPrefix:"client-"},M=e=>new Promise((t,n)=>{const r=document.createElement("script"),s=e.hasAttribute("src"),d=e.type==="module";for(const{name:o,value:i}of e.attributes)r.setAttribute(o,i);if(r.dataset.testid!==void 0&&(r.dataset.testid=`${C.scriptTestIdPrefix}${r.dataset.testid}`),s)r.addEventListener("load",()=>{t()}),r.addEventListener("error",n);else{if(d){const o=new Blob([e.innerText],{type:"text/javascript"}),i=URL.createObjectURL(o);import(i).then(t).catch(n).finally(()=>{URL.revokeObjectURL(i)});return}r.textContent=e.innerText}e.replaceWith(r),s===!1&&t()}),f=[];let u=!1;const T=async e=>{if(f.push(...e),await Promise.resolve(),!u){for(S(),u=!0;f.length>0;)await f.shift()();O(),u=!1}},$=e=>{const t=e.querySelectorAll("script"),n=[],r=[];t.forEach(s=>{(s.hasAttribute("async")?r:n).push(()=>M(s))});for(const s of r)s();T(n)},P=e=>{const{code:t,innerRef:n,...r}=e;return a.jsx("div",{ref:n,...r,style:{display:"block",padding:20},children:'Open the "Settings" panel to insert HTML code.'})},h=()=>c.useSyncExternalStore(()=>()=>{},()=>!1,()=>!0),p=e=>{if(!h())return e.children},x=e=>{const{code:t,innerRef:n,...r}=e,s=c.useRef(null),d=c.useRef(!0),o=c.useMemo(()=>({__html:t??""}),[t]);return c.useEffect(()=>{const i=s.current;i&&d.current&&(d.current=!1,$(i))},[]),a.jsx("div",{...r,ref:g(n,s),dangerouslySetInnerHTML:o})},y=e=>{const{code:t,innerRef:n,...r}=e;return a.jsx("div",{...r,ref:n,dangerouslySetInnerHTML:{__html:t??""}})},k=y,H=c.forwardRef((e,t)=>{const{code:n,executeScriptOnCanvas:r,clientOnly:s,children:d,...o}=e,{renderer:i}=c.useContext(R),v=h(),[w]=c.useState(v);return n===void 0||String(n).trim().length===0?a.jsx(P,{innerRef:t,...o}):w?s!==!0?a.jsx(y,{innerRef:t,code:n,...o}):a.jsx(p,{children:a.jsx(x,{innerRef:t,code:n,...o})}):i==="canvas"&&r!==!0?a.jsx(p,{children:a.jsx(k,{innerRef:t,code:n,...o})}):a.jsx(p,{children:a.jsx(x,{innerRef:t,code:n,...o},n)})});H.displayName="HtmlEmbed";const I="div",N=c.forwardRef(({tag:e,...t},n)=>{const r=j(t)??e??I;return c.createElement(r,{...t,ref:n})});N.displayName="Text";const A=c.forwardRef((e,t)=>a.jsx("b",{...e,ref:t}));A.displayName="Bold";export{H as P,A as f,L as l,E as m,N as n};
